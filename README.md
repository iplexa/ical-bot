# Telegram Бот для работы с iCal календарями

Этот бот позволяет пользователям подписываться на события из онлайн-календарей в формате iCal и получать уведомления о предстоящих мероприятиях.

## Функциональность

- Добавление ссылки на онлайн-календарь в формате iCal
- Просмотр предстоящих событий на день, три дня или неделю
- Подписка на уведомления о начале мероприятий
- Редактирование сообщений вместо отправки новых (для удобства навигации)
- Интерактивное взаимодействие через inline-кнопки

## Установка

1. Клонируйте репозиторий:
```
git clone <url-репозитория>
cd <папка-проекта>
```

2. Установите зависимости:
```
pip install -r requirements.txt
```

3. Создайте бота в Telegram через [@BotFather](https://t.me/BotFather) и получите токен

4. Установите токен бота как переменную окружения:
```
export BOT_TOKEN="ваш_токен_бота"

## Запуск с помощью Docker

1. Соберите Docker-образ:
```bash
docker build -t telegram-bot .
```

2. Запустите контейнер:
```bash
docker run -d \
  --name bot-container \
  -e BOT_TOKEN=ваш_токен_бота \
  -e DATABASE_URL=postgresql://user:pass@host/db \
  telegram-bot
```

Для передачи переменных окружения можно использовать `.env` файл:
```bash
docker run -d --env-file .env --name bot-container telegram-bot
```
```

## Запуск

```
python bot.py
```

## Использование

1. Начните диалог с ботом, отправив команду `/start`
2. Добавьте ссылку на ваш iCal календарь
3. Используйте inline-кнопки для:
   - Просмотра предстоящих событий
   - Включения/отключения уведомлений
   - Изменения календаря

## Требования

- Python 3.7+
- Библиотеки из файла requirements.txt

## Примечания

- Бот проверяет наличие новых событий каждые 5 минут
- Уведомления отправляются за 15 минут до начала события
- Для корректной работы с часовыми поясами используется локальное время пользователя